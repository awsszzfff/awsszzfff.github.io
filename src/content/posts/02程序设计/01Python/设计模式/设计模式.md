---
title: "设计模式"
date: 2025-08-03
tags:
  - Others
categories:
  - Others
---
## 单例模式

```python
# 方式一
class SingletonType(type):  
    """  
    Singleton metaclass.    
    """  
    def __init__(cls, name, bases, dict):  
        super(SingletonType, cls).__init__(name, bases, dict)  
        cls.instance = None  
  
    def __call__(cls, *args, **kw):  
        if cls.instance is None:  
            cls.instance = super(SingletonType, cls).__call__(*args, **kw)  
        return cls.instance  
  
  
class Singlenton(metaclass=SingletonType):  
    pass  
  
  
singleton_one = Singlenton()  
singleton_two = Singlenton()  
print(singleton_one is singleton_two)	# True

# 方式二
def outer(cls):  
    instance = {'cls': None}  
  
    def inner(*args, **kwargs):  
        if not instance['cls']:  
            instance['cls'] = cls(*args, **kwargs)  
        return instance['cls']  
  
    return inner  
  
  
@outer  
class Single(object):  
    pass  
  
  
single_one = Single()  
single_two = Single()  
print(single_one is single_two)	# True

# 方式三

# 通过在一个包里对类进行实例化，而在外部仅需要赋值给不同的变量即可实现
# eg：一个包里：tools = Tools()
# 在外面函数仅需要导入该部分并对变量进行赋值即可
single_one = tools
single_two = tools
print(single_one is single_two)	# True
```